<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HelixCalc Ultimate | Spring Engineering</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body>

    <div class="app-container">
        <header>
            <div class="header-left">
                <div class="logo">
                    <div class="logo-icon"></div>
                    <h1>Helix<span>Calc</span> <small>Ultimate</small></h1>
                </div>
                <p>Professional Spring Design & Analysis Tool</p>
            </div>
            <button id="btn-download" class="download-btn">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
                Download Report
            </button>
        </header>

        <main class="dashboard">
            
            <!-- LEFT COLUMN: Inputs & Reverse Engineering -->
            <div class="col-left">
                
                <!-- 1. Solver Mode Selection -->
                <div class="mode-selector">
                    <label>Solver Mode:</label>
                    <select id="calc-mode">
                        <option value="k">Standard (Input Geometry)</option>
                        <option value="d">Solve for Wire Dia (d)</option>
                        <option value="na">Solve for Coils (Na)</option>
                    </select>
                </div>

                <!-- 2. Main Parameters -->
                <section class="controls card">
                    <div class="card-header">
                        <h2>Design Parameters</h2>
                        <span class="badge">Input</span>
                    </div>

                    <form id="spring-form">
                        <!-- Target Rate (Hidden unless solving) -->
                        <div class="input-group special-input hidden" id="group-target-k">
                            <div class="label-row">
                                <label>Target Rate (k)</label>
                                <span class="unit">N/mm</span>
                            </div>
                            <div class="input-wrapper">
                                <input type="number" id="input-target-k" value="5.00" step="0.1">
                            </div>
                        </div>

                        <!-- Wire Diameter -->
                        <div class="input-group" id="group-wire">
                            <div class="label-row">
                                <label>Wire Diameter (d)</label>
                                <span class="val-display" id="disp-wire">2.0 mm</span>
                            </div>
                            <div class="input-wrapper">
                                <input type="range" id="range-wire" min="0.1" max="12" step="0.05" value="2.0">
                                <input type="number" id="input-wire" min="0.1" step="0.05" value="2.0">
                            </div>
                            <small class="lock-msg">Locked by Solver</small>
                        </div>

                        <!-- Outer Diameter -->
                        <div class="input-group" id="group-od">
                            <div class="label-row">
                                <label>Outer Diameter (OD)</label>
                                <span class="val-display" id="disp-od">25.0 mm</span>
                            </div>
                            <div class="input-wrapper">
                                <input type="range" id="range-od" min="5" max="150" step="0.5" value="25.0">
                                <input type="number" id="input-od" min="5" step="0.5" value="25.0">
                            </div>
                        </div>

                        <!-- Active Coils -->
                        <div class="input-group" id="group-coils">
                            <div class="label-row">
                                <label>Active Coils (Na)</label>
                                <span class="val-display" id="disp-coils">8</span>
                            </div>
                            <div class="input-wrapper">
                                <input type="range" id="range-coils" min="2" max="50" step="0.5" value="8">
                                <input type="number" id="input-coils" min="2" step="0.5" value="8">
                            </div>
                            <small class="lock-msg">Locked by Solver</small>
                        </div>

                        <!-- Free Length -->
                        <div class="input-group">
                            <div class="label-row">
                                <label>Free Length (L0)</label>
                                <span class="val-display" id="disp-len">60 mm</span>
                            </div>
                            <div class="input-wrapper">
                                <input type="range" id="range-len" min="10" max="300" step="1" value="60">
                                <input type="number" id="input-len" min="10" step="1" value="60">
                            </div>
                        </div>

                        <!-- Material -->
                        <div class="input-group">
                            <label>Material</label>
                            <select id="material">
                                <option value="79300">Music Wire (ASTM A228)</option>
                                <option value="77200">Stainless Steel (302/304)</option>
                                <option value="79300">Chrome Silicon</option>
                                <option value="41400">Phosphor Bronze</option>
                            </select>
                        </div>
                    </form>
                </section>

                <!-- 3. Reverse Engineering Module -->
                <section class="reverse-eng card">
                    <div class="card-header">
                        <h2>Reverse Engineering</h2>
                        <span class="badge orange">Target</span>
                    </div>
                    <p class="helper-text">Enter a required load to calculate the necessary stiffness.</p>
                    
                    <div class="rev-grid">
                        <div class="rev-input">
                            <label>Required Force (N)</label>
                            <input type="number" id="rev-force" placeholder="e.g. 150">
                        </div>
                        <div class="rev-input">
                            <label>@ Length (mm)</label>
                            <input type="number" id="rev-len" placeholder="e.g. 40">
                        </div>
                    </div>

                    <div class="rev-result-box">
                        <div class="rev-row">
                            <span>Required Rate (k):</span>
                            <strong id="rev-k-result">---</strong>
                        </div>
                        <button id="btn-apply-target" class="action-btn">
                            ðŸª„ Auto-Design (Solve for Wire)
                        </button>
                    </div>
                </section>
            </div>

            <!-- RIGHT COLUMN: Visuals & Analysis -->
            <div class="col-right">
                
                <!-- 4. Canvas Visualization -->
                <section class="visual card">
                    <div class="card-header">
                        <h2>Geometry Preview</h2>
                        <span class="badge blue">2D Render</span>
                    </div>
                    <div class="canvas-wrapper">
                        <canvas id="springCanvas"></canvas>
                    </div>
                </section>

                <!-- 5. Calculated Results -->
                <section class="results card">
                    <div class="card-header">
                        <h2>Calculated Data</h2>
                        <span class="badge green">Output</span>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box main-stat">
                            <span class="stat-label">Spring Rate (k)</span>
                            <div class="stat-value" id="res-rate">0.00</div>
                            <span class="stat-unit">N/mm</span>
                        </div>
                        <div class="stat-box">
                            <span class="stat-label">Solid Height</span>
                            <div class="stat-value" id="res-solid">0.00</div>
                            <span class="stat-unit">mm</span>
                        </div>
                        <div class="stat-box">
                            <span class="stat-label">Max Travel</span>
                            <div class="stat-value" id="res-travel">0.00</div>
                            <span class="stat-unit">mm</span>
                        </div>
                        <div class="stat-box">
                            <span class="stat-label">Spring Index (C)</span>
                            <div class="stat-value" id="res-index">0.00</div>
                            <span class="stat-unit">Mean / Wire</span>
                        </div>
                    </div>
                </section>

                <!-- 6. Load Simulator -->
                <section class="load-check card">
                    <div class="card-header">
                        <h2>Force Simulator</h2>
                        <span class="badge purple">Check</span>
                    </div>
                    <div class="load-row">
                        <div class="input-wrapper">
                            <label>Compressed To:</label>
                            <div class="input-with-unit">
                                <input type="number" id="sim-len" value="50">
                                <span>mm</span>
                            </div>
                        </div>
                        <div class="result-wrapper">
                            <label>Force Generated:</label>
                            <div class="dynamic-value"><span id="sim-force">0.00</span> N</div>
                        </div>
                    </div>
                    <div class="progress-bar-bg">
                        <div class="progress-bar-fill" id="load-bar" style="width: 0%"></div>
                    </div>
                    <small id="load-warning" class="warning-text"></small>
                </section>

            </div>
        </main>
    </div>

    <script src="script.js"></script>
</body>
</html>